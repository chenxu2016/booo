(function(a,b){function j(a){return a===undefined?a=b:typeof a=="string"&&h.test(a)?a=k(a.slice(1),b):a instanceof n?a=a[0]||null:a&&a.nodeType!==1&&a.nodeType!==9&&(a=null),a}function k(a,b){return b.nodeType!==9&&(b=b.ownerDocument),b.getElementById(a)}function l(a,b){return b.getElementsByTagName(a)}function m(a,b,c){var d=c.getElementsByClassName(a),f=d,g=0,h=0,i=d.length,j;if(b&&b!==e){f=[],b=b.toUpperCase();for(;g<i;++g)j=d[g],j.tagName===b&&(f[h++]=j)}return f}var c=b.dispatchEvent,d=" ",e="*",f=String.prototype.trim,g=/(^\s*)|(\s*$)/g,h=/#([\w\-]+)$/,i=/^(?:[^<]*(<[\w\W]+>)[^>]*$|(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$)/;b.getElementsByClassName||(b.querySelectorAll?m=function(a,b,c){return c.querySelectorAll((b?b:"")+"."+a)}:m=function(a,b,c){var f=c.getElementsByTagName(b||e),g=[],h=0,i=0,j=f.length,k,l;a=d+a+d;for(;h<j;++h)k=f[h],l=k.className,l&&(d+l+d).indexOf(a)>-1&&(g[i++]=k);return g});var n=function(a,b){return new n.fn.init(a,b)};n.fn=n.prototype={constructor:n,init:function(b,c){var e,f,g,o,p,q;c=j(c);if(!b||!c)return this;if(b.nodeType||b.window===a||b===a)return this.context=this[0]=b,this.length=1,this;if(typeof b=="string"){if(h.test(b))return f=k(b.slice(1),c),f&&(this.length=1,this[0]=f,this.context=c),this;if(e=i.exec(b))if(e&&!e[1]){g=e[2],o=e[3],p=e[4];if(c=g?k(g,c):c)p?!g||b.indexOf(d)!==-1?q=m(p,o,c):(f=k(g,c),f&&n.hasClass(f,p)&&(q=[f])):o&&(q=l(o,c))}}else if(typeof b=="function")return n.ready(b);return n.merge(this,q)},length:0,html:function(a){return a?this.each(function(){this.innerHTML=a}):this[0]&&this[0].innerHTML},text:function(){return this[0].textContent||this[0].innerText},css:function(a,b){return a.replace(/\-(.)/g,function(a,b){return b.toUpperCase()}),this.each(function(){this.style[a]=b})},show:function(){return this.css("display","block")},hide:function(){return this.css("display","none")},addClass:function(a){return this.each(function(){var b=a.split(d),c=d+this.className+d,e;while(e=b.shift())c.indexOf(d+e+d)===-1&&(c+=e+d);this.className=n.trim(c)})},removeClass:function(a){return this.each(function(){if(a){var b=a.split(d),c=d+this.className+d,e;while(e=b.shift())c=c.replace(d+e+d,d);this.className=n.trim(c)}else this.className=""})},hasClass:function(a){if(this[0])return(d+this[0].className+d).indexOf(d+a+d)!=-1?!0:!1},on:c?function(a,b,c){return this.each(function(){this.addEventListener(a,function(c){if("mouseenter|mouseleave".indexOf(a)!=-1){var d=c.relatedTarget;if(this===d||n.contains(this,d))return}b.call(this,c)},!!c)})}:function(a,b){return this.each(function(){var c=this;this.attachEvent&&this.attachEvent("on"+a,function(a){a=n.fixEvent(),b.call(c,a)})})},attr:function(a,b){if(arguments.length!=1)return this.each(function(){n.setAttr(this,a,b)});if(this[0])return n.getAttr(this[0],a,b)},append:function(a){return this[0]&&this[0].appendChild(a),this},val:function(a){return typeof a=="undefined"&&this[0]?this[0].value:this.each(function(){this.value=a})},prev:function(){if(!this[0])return this;var a=this[0].previousSibling;return a&&a.nodeType!==1&&(a=a.previousSibling),n(a)},next:function(){if(!this[0])return this;var a=this[0].nextSibling;return a&&a.nodeType!==1&&(a=a.nextSibling),n(a)},first:function(){return this[0]?n(this[0].firstChild):this},last:function(){return this[0]?n(this[0].lastChild):this},closest:function(a){a=a.slice(1);var b=null,c=this[0];while(c&&c.nodeType===1){if(c.className.indexOf(a)>-1){b=c;break}c=c.parentNode}return n(b)},offset:function(){var a=0,b=0,c=0,d=0;if(this[0]){var e=this[0];if(e.getBoundingClientRect){var f=e.getBoundingClientRect();a=c=n.getScrollLeft(e),b=d=n.getScrollTop(e),a+=f.left,c+=f.right,b+=f.top,d+=f.bottom}else{var g=e;while(g)a+=g.offsetLeft,b+=g.offsetTop,g=g.offsetParent;c=a+e.offsetWidth,d=b+e.offsetHeight}}return{left:a,top:b,right:c,bottom:d}}},n.fn.init.prototype=n.fn,n.noop=function(){},n.each=n.fn.each=function(a,b){var c=0,d,e;typeof a=="function"&&(b=a,a=this),d=a.length;if(typeof d=="number"){for(;c<d;c++)if(b.call(a[c],c,a[c],a)===!1)break}else for(e in a)if(a.hasOwnProperty(e)&&b.call(a[e],e,a[e],a)===!1)break;return a},n.trim=n.fn.trim=f?function(a){return a.trim()}:function(a){return a.replace(g,"")},n.extend=n.fn.extend=function(a,b){var c=[].slice.call(arguments),d,e=typeof c[c.length-1]=="boolean"?c.pop():!0;a=a||{};for(var f=1;b=c[f++];)for(d in b)if(e||!(d in a))a[d]=b[d];return a},a.JSON?n.JSON=a.JSON:n.JSON={parse:function(a){return(new Function("return "+a))()},stringify:function(a){if(a instanceof Object){var b="";if(a.constructor===Array){for(var c=0;c<a.length;b+=this.stringify(a[c])+",",c++);return"["+b.substr(0,b.length-1)+"]"}if(a.toString!==Object.prototype.toString)return'"'+a.toString().replace(/"/g,"\\$&")+'"';for(var d in a)b+='"'+d.replace(/"/g,"\\$&")+'":'+this.stringify(a[d])+",";return"{"+b.substr(0,b.length-1)+"}"}return typeof a=="string"?'"'+a.replace(/"/g,"\\$&")+'"':String(a)}},n.extend(n,{merge:function(a,b){var c=b.length,d=a.length,e=0;if(typeof c=="number")for(;e<c;e++)a[d++]=b[e];else while(b[e]!==undefined)a[d++]=b[e++];return a.length=d,a},contains:b.defaultView?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!=b&&a.contains(b)},fixEvent:function(b){if(b)return b;b=a.event,b.pageX=b.clientX+n.getScrollLeft(b.srcElement),b.pageY=b.clientY+n.getScrollTop(b.srcElement),b.target=b.srcElement,b.stopPropagation=function(){this.cancelBubble=!0},b.preventDefault=function(){this.returnValue=!1};var c={mouseout:b.toElement,mouseover:b.fromElement}[b.type];return c&&(b.relatedTarget=c),b},getScrollTop:function(a){var c=a?a.ownerDocument:b;return c.documentElement.scrollTop||c.body.scrollTop},getScrollLeft:function(a){var c=a?a.ownerDocument:b;return c.documentElement.scrollLeft||c.body.scrollLeft},setAttr:function(a,b,c){b in a?a[b]=c:a.setAttribute(b,c)},getAttr:function(a,b){return b in a&&"href"!=b?a[b]:a.getAttribute(b)},browser:function(){var a=navigator.userAgent.toLowerCase(),b={msie:/msie/,msie6:/msie 6\.0/,msie7:/msie 7\.0/,msie8:/msie 8\.0/,msie9:/msie 9\.0/,msie10:/msie 10\.0/,firefox:/firefox/,opera:/opera/,webkit:/webkit/,iPad:/ipad/,iPhone:/iphone/,android:/android/};for(var c in b)b[c]=b[c].test(a);return b}(),addStyle:function(a){var c=b.head||b.getElementsByTagName("head")[0],d=b.createElement("style");d.type="text/css",d.styleSheet?d.styleSheet.cssText=a:d.appendChild(b.createTextNode(a)),c.appendChild(d)},loadJs:function(a,c,d){d=d||{};var e=b.head||b.getElementsByTagName("head")[0],f=b.createElement("script"),g=!1;f.src=a,d.charset&&(f.charset=d.charset),"async"in d&&(f.async=d.async||""),f.onerror=f.onload=f.onreadystatechange=function(){!g&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")&&(g=!0,c&&c(),f.onerror=f.onload=f.onreadystatechange=null,e.removeChild(f))},e.insertBefore(f,e.firstChild)},loadJsonp:function(){var b=new Date*1;return function(c,d,e){e=e||{};var f="BJsonp"+b++,g=e.cb||"callback";a[f]=function(b){d&&d(b),a[f]=null},c+=(/\?/.test(c)?"&":"?")+g+"="+f,n.loadJs(c,null,e)}}(),isReady:!1,ready:function(){var a=[],b=function(c){return c&&c.call&&a.push(c),b};return b.fire=function(c){a=b.reuse?a.concat():a;while(c=a.shift())c();return a.length?b:b.complete()},b.complete=n.noop,b}(),fireReady:function(){if(n.isReady)return;n.isReady=!0,n.ready.fire(),n.fireReady=n.noop}});if(b.readyState==="complete")n.fireReady();else if(b.addEventListener)b.addEventListener("DOMContentLoaded",function(){b.removeEventListener("DOMContentLoaded",arguments.callee,!1),n.fireReady()},!1);else if(b.attachEvent){b.attachEvent("onreadystatechange",function(){b.readyState==="complete"&&(b.detachEvent("onreadystatechange",arguments.callee),n.fireReady())});var o=!1;try{o=a.frameElement==null&&b.documentElement}catch(p){}o&&o.doScroll&&function q(){if(!n.isReady){try{o.doScroll("left")}catch(a){return setTimeout(q,50)}n.fireReady()}}()}a.Blast=a.Bl=n})(window,document),function(a){var b;a.changeNav=function(c){b=c,a("#def-nav").hide(),a("#com-nav").append(a(b.el)[0]),a("#nav").css("height",a("#com-nav")[0].scrollHeight+"px")},a.restoreNav=function(){b&&b.restoreContainer&&a(b.restoreContainer).append(a(b.el)[0]),a("#def-nav").show(),a("#nav").css("height",a("#com-nav")[0].scrollHeight+"px")};var c=null,d=[];a.checkLogin=function(a){if(typeof a!="function")throw"fn must be a function";c?a(c):d.push(a)},a.__trigerLogin=function(a){a=a;var b;while(b=d.shift())b(a)}}(window.Blast),function(a){function i(){var c=a("#com-topbar");a(".drop",c).on("mouseover",function(){a(".down",this).show()}).on("mouseout",function(){a(".down",this).hide()}),a(".know",c).on("click",function(){var b=g+"ja/msg/setzero?param=all";a.loadJsonp(b,function(b){b&&b.code==0&&(a(".msg-num",c).hide(),a(".notice",c).hide(),a(".know",c).hide())})});if(b.topbar){var d="http://dootaapi.meilishuo.com/cart/number";a.loadJsonp(d,function(b){b&&b.info&&a(".cart-num",c).html(b.info.count)},{cb:"__callback"})}}function j(){function n(){a("span",d).removeClass("active"),a(this).addClass("active"),k=+a(this).attr("data-type"),j&&e.attr("placeholder",k==0?e.attr("data-placeholder"):"")}function o(b){var c=a(".active",f).removeClass("active");c.length?b=="up"?(c=c.prev(),c.length||(c=f.last())):(c=c.next(),c.length||(c=f.first())):c=f.first(),c.addClass("active"),e.val(c.attr("data-title"))}function p(b){k==0?b=a.trim(b)||a.trim(e.attr("data-key")):b=a.trim(b);if(!b)return;var d="&searchKey="+encodeURIComponent(b),f="&pstrc="+encodeURIComponent("searchgoods="+b),g=c+"search/baobei/?filter=goods";k!=0&&(g=c+"search/searchShop/?filter=shop",f="&pstrc="+encodeURIComponent("searchshop="+b)),location.href=g+d+f}function r(){if(k!=0)return;var b=a.trim(a(this).val());if(!b)return;if(q.lastVal==b){f.show();return}q.lastVal=b,q.cache[k]=q.cache[k]||{};var c=q.cache[k];clearTimeout(q.delayId),q.delayId=setTimeout(function(){if(c[b])q.render(c[b]);else{var d=q.url+"?searchKey="+encodeURIComponent(b);a.loadJsonp(d,function(a){c[b]=a,q.render(c[b])})}},q.delayTime)}var b=a("#com-search"),d=a(".search-tab",b),e=a(".search-txt",b),f=a(".suggest-box",b),h=a(".search-btn",b),i="oninput"in document,j="placeholder"in document.createElement("input"),k=0,l=/(?:&|\?)searchKey=([^&]+)/.exec(location.search);l&&l[1]&&e.val(decodeURI(l[1]));var m=/(?:&|\?)filter=([^&]+)/.exec(location.search);m=m&&m[1],m=="shop"&&n.call(a("span",d)[1]),a("span",d).on("click",function(){n.call(this)});var q={lastVal:null,delayId:null,cache:{},url:g+"ja/search/",delayTime:500,render:function(a){if(a&&a.total){var b="";for(var c=0;c<a.prompt.length;c++){var d=a.prompt[c].tags,e="";for(var g=0;g<d.length;g++)e+="<span>"+d[g]+"</span>";b+='<div class="item" data-title="'+a.prompt[c].title+'">'+a.prompt[c].title+'<div class="tags">'+e+"</div>"+"</div>"}f.html(b).show()}else f.hide()}};i?e.on("input",function(a){r.call(this)}):e.on("propertychange",function(a){r.call(this)}),e.on("blur",function(){setTimeout(function(){f.hide()},250)}).on("focus",function(){r.call(this)}).on("keyup",function(a){var b=a.keyCode;if(b==38||b==40){var c=b==38?"up":"down";o(c)}else b==13&&p(this.value)}),f.on("mouseover",function(b){a(".item",this).removeClass("active"),a(b.target).closest(".item").addClass("active")}).on("click",function(b){var c=a(".active",this).attr("data-title"),d=b.target;d.tagName.toLowerCase()=="span"?p(c+" "+a(d).text()):p(c)}),h.on("click",function(){p(e.val())})}function k(){var b=a("#com-nav"),c=function(a,b){return a.indexOf(b)!=-1},d=/\/(\w+)$/.exec(location.pathname);if(d){d=d[1];if(d=="dress"){var e=location.search;c(e,"nid=210113")?d="jacket":c(e,"nid=210115")?d="skirt":c(e,"nid=210117")?d="pants":c(e,"nid=210119")&&(d="underwear")}}else location.pathname=="/"&&(d="welcome");a("a",b).each(function(){if(a(this).attr("data-word")==d)return a(this).addClass("active"),!1});var f=b.offset().top;a(window).on("scroll",function(){a.getScrollTop()>f?b.addClass("fixed"):b.removeClass("fixed")})}function l(){var b=a("#com-foot"),c=a(".link-slide",b),d=1,e=20,f=150,g=!0;c.length&&setInterval(function(){if(!g){d++>=f&&(d=1,g=!0);return}var b=a("li",c)[0];a(b).css("margin-top",-(d++)+"px"),d>=e&&(g=!1,a(b).css("margin-top",0),c.append(b))},16.7)}var b,c="http://www.meilishuo.com/",d=location.host,e=["newlab.meilishuo.com","qalab.meilishuo.com","rdlab.meilishuo.com","fedevot.meilishuo.com"];for(var f=0;f<e.length;f++)if(d.lastIndexOf(e[f])>-1){c="http://"+d+"/";break}var g=c;location.protocol==="https:"&&(g="https://account.meilishuo.com/");var h=function(c){c.css&&a.addStyle(c.css),b.topbar&&a(b.topbar.container).html(c.topbar),b.search&&a(b.search.container).html(c.search),b.nav&&a(b.nav.container).html(c.nav),b.foot&&a(b.foot.container).html(c.foot)},m=function(){i(),j(),k(),l()},n=function(){var c=g+"ja/blast/";c+="?conf="+encodeURIComponent(a.JSON.stringify(b))+"&path="+encodeURIComponent(location.pathname),a.loadJsonp(c,function(b){a.__trigerLogin(b.uinfo),h(b),m()})};a.init=function(c){b=c;var d=["topbar","search","nav","foot"];a.each(d,function(a,c){var d=b[c];typeof d=="string"&&(b[c]={container:d})}),n()}}(window.Blast);